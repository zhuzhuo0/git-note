## OAuth介绍与接入

#### 认证（Authentication）

``` 
# 解释：你如何证明你是你自己
# 常见方式：
1.用户名密码登陆
2.邮箱发送登陆验证
3.手机号接收验证码

# 高强度的认证
1.设置高强度的密码
2.对密码进行加密（针对数据库被破解，防止密码明文暴露）
3.保证客户端和服务端进行安全通行，防止密码被中间人获取（https）
4.为忘记密码的用户提供恢复密码的功能
5.为进一步安全实现两部验证

# 如果全部自己考虑，那么会很复杂
# 通过OAuth，将认证的工作放到第三方进行，这样我们就只需要接收授权即可

# 授权（Authorization）
# 常见方式：
1.手机询问权限
2.登录操作系统之后，会有权限授予
3.OAuth后，被授权方会收获一定的权限

# cookie最常见的授权操作

# 授权并不一定要先认证
1.只要你有钥匙，你就可以开门
2.只要持有优惠券，就可以享受优惠

# OAuth通过token授予权限

# 什么事OAuth
# OAuth是一种行业标准的授权方式
# 两个版本1.x，2.x，基本上都是2.x
# 角色：
1.客户端（网页，界面）
2.服务端（后台服务）
3.授权方（授权）

# 客户端和服务端可以合并为被授权方

# 多种授权方式：
1.Authorization Code （获取授权方给予的token）
2.Refresh Token（获取token之后，通过Refresh Token延长token有效期，通过这样的方式，不需要再次进行授权）
3.Device Code（设备授权）
4.Password（不受信任的）
5.Client Credentials （客户端相关的权限，不涉及到具体的用户）
# 具体有哪些方式，主要看OAuth授权方提供哪些方式

# OAuth关键字段
# 具体可以查看帮助文档
# 请求授权相关字段
1.client_id 暴露出去的，认证的时候带过去的
2.scope 表示权限
3.redirect_uri（重定向uri）,login（是否允许用户在没有登录的情况下，通过登录的方式进行授权，默认为true）,state（在请求授权的时候传给授权方，授权成功之后还会将该字段返回，通过对比两次的state可以判断改次的授权是否和之前跳转是对应的，保证授权过程的安全性）,allow_signup（是否允许用户注册，既如果用户没有注册过，是否允许用户先注册后授权）

# 请求token相关字段
client_id（注册应用之后会得到），client_secret（注册应用之后会得到），code（用户授权之后获得code，用于传给后台，后台通过可通过code获取token，注：这个code是一次性的），redirect_uri，state

# OAuth Code如何保证授权安全
1.获取的code是一次性的
2.id+scret+code，scret是保存在服务器上的，这样即使中间网管获得code，也没有用
3.redirect_uri 在注册应用的时候，需要填写redirect_uri,如果传递的redirect_uri被手动改变，那么返回的信息将会报错，并且不含有code，这样保证的返回的地址肯定是我们所希望的地址，是被我们所信任的

# 保证安全的措施
1.保证scret是安全的，没有暴露出去
2.保证redirect_uri是线上的，安全地址
3.用https协议，保证即使请求信息被截取，也无法解析

```

#### cookie和session

```
# cookie
```

